<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>API Capstone</title>
    <!-- Bootstrap 5 -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- Anonymous Pro font -->
    <link
      href="https://fonts.googleapis.com/css2?family=Anonymous+Pro:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <!-- Your CSS -->
    <link rel="stylesheet" href="styles/main.css" />
    <link rel="stylesheet" href="styles/suggest.css" />
  </head>
  <body class="d-flex flex-column min-vh-100">
    <main
      class="container-fluid flex-grow-1 d-flex flex-column align-items-center justify-content-start py-4"
    >
      <h1 class="main-title mb-4">Weather App Capstone</h1>
      <form
        action="/"
        method="POST"
        class="weather-form mb-4 d-flex flex-column align-items-center"
      >
        <div
          class="input-wrap position-relative w-100"
          style="max-width: 400px"
        >
          <input
            type="text"
            name="city"
            placeholder="Enter city"
            autocomplete="off"
            class="form-control city-input"
          />
          <!-- Suggestion box will be injected here by JS -->
        </div>
        <button type="submit" class="btn btn-primary get-weather-btn mt-3">
          Get Weather
        </button>
      </form>
      <% if (forecast) { %>
      <h2 class="forecast-header mb-4">
        7-day forecast for <b><%= city %></b>
      </h2>
      <div class="forecast-cards d-flex flex-wrap gap-4 justify-content-center">
        <% forecast.forEach(day => { %>
        <div class="weather-card">
          <div class="card-header"><%= day.date %></div>
          <img
            src="<%= day.iconUrl %>"
            alt="Weather icon"
            class="weather-svg"
          />
          <div class="weather-info">
            <p>High: <%= day.temp_max %>°C</p>
            <p>Low: <%= day.temp_min %>°C</p>
            <p>Precipitation: <%= day.precipitation %> mm</p>
            <p>Humidex: <%= day.humidex !== null ? day.humidex : "N/A" %></p>
          </div>
        </div>
        <% }) %>
      </div>
      <% } %> <% if (error) { %>
      <p class="error-message mt-4"><%= error %></p>
      <% } %>
    </main>
    <%- include('_footer') %>
    <script src="scripts/animations.js"></script>
    <script src="scripts/autocomplete.js"></script>
  </body>
</html>
